window.__require=function t(e,i,o){function s(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var h=i[c]={exports:{}};e[c][0].call(h.exports,function(t){return s(e[c][1][t]||t)},h,h.exports,t,e,i,o)}return i[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)s(o[c]);return s}({"TX.BetTimer":[function(t,e,i){"use strict";cc._RF.push(e,"2a448tXOKdLcah6nQFrUOyF","TX.BetTimer");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("lodash"),{ccclass:n,property:c}=cc._decorator;let r=class extends cc.Label{constructor(){super(...arguments),this.remainTime=null,this.state=""}onLoad(){this.string=""}countdown(){this.node.opacity=0,this.node.scale=.7,this.string=s.padStart(this.remainTime.toString(),2,"0"),this.node.color=this.remainTime>5?cc.Color.WHITE:new cc.Color(255,92,0),this.node.stopAllActions(),this.node.runAction(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.2,1)))}_start(t){this.remainTime!==t&&(this.remainTime=t,this.countdown())}refunding(){this.node.opacity=255,this.node.scale=1,this.string="00",this.node.color=new cc.Color(255,92,0,255)}stop(t=!0){if(this.remainTime=null,t){if(!this.node.opacity)return;this.node.runAction(cc.fadeOut(.1))}else this.node.opacity=0}};r=o([n],r),i.default=r,cc._RF.pop()},{lodash:void 0}],"TX.Bettor":[function(t,e,i){"use strict";cc._RF.push(e,"a459aLVLnNNn4+Nz8COW8A/","TX.Bettor");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Configs"),n=t("../../../scripts/common/GlobalVariables"),c=t("../../../scripts/common/MenuPanel"),r=t("../../../scripts/common/Tween"),a=t("../../../scripts/common/Utils"),l=t("./TX.Interfaces"),h=t("./TX.Toast"),{ccclass:d,property:p}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.btnTai=null,this.btnXiu=null,this.lblTai=null,this.lblXiu=null,this.bettorQuick=null,this.lblBetedTai=null,this.lblBetedXiu=null,this.toast=null,this.betted=0,this.referenceId=null,this.amount=0,this.tx=null}onLoad(){this.bettorQuick.node.getChildByName("BetBtns").getComponentsInChildren(cc.Button).forEach(t=>{t.node.on("click",()=>{const e=Number(t.node.name);this.chooseBet(e)})})}open(t,e){this.handleOpen(e)}customBetted(t,e){this.handleOpen(t,e)}handleOpen(t,e=0){s.default.Login.IsLogin?(this.tx=t,this.chooseBet(void 0,!0,!1),e>0&&this.setBetted(e,!0),this.switchControls(),this.bettorQuick.open()):this.node.dispatchEvent(new n.MyEvent("openLogin"))}close(){this.chooseBet(0,!0),this.bettorQuick.close(),this.tx=null,this.switchControls()}allIn(){this.chooseBet(-1,!0,!0)}handleResult(){this.setBetted(this.amount),this.chooseBet(0,!0,!0)}updateBetted(t){const e=this.betted-t;this.bettedLabel.string=a.default.formatNumber(e)}setBetted(t,e=!1,i=!0,o=null,s=0){if(s&&this.referenceId!==s){if(this.referenceId)return this.referenceId=s,this.resetBetted();this.referenceId=s}o&&(this.tx=o),e?this.betted=t:this.betted+=t,this.betted?(i?r.default.numberTo(this.bettedLabel,this.betted,.1,void 0,!1,{bounce:!0}):this.bettedLabel.string=a.default.formatNumber(this.betted),this.betBtn(!0).interactable=!1):this.bettedLabel.string=""}resetBetted(t=0){t&&(this.referenceId=t),this.betted=0,this.lblBetedTai.string="",this.lblBetedXiu.string="",this.btnTai.getComponent(cc.Button).interactable=!0,this.btnXiu.getComponent(cc.Button).interactable=!0}chooseBet(t=this.amount,e=!1,i=!0){-1===t?this.amount=s.default.Login.Coin:e?this.amount=t:this.amount+=t,this.amount>s.default.Login.Coin&&(this.amount=s.default.Login.Coin,this.toast.showMsg("Kh\xf4ng \u0111\u1ee7 ti\u1ec1n c\u01b0\u1ee3c. H\xe3y n\u1ea1p th\xeam.")),i?r.default.numberTo(this.amountLabel,this.amount,.1,void 0,!1,{bounce:!1}):this.amountLabel.string=a.default.formatNumber(this.amount),this.switchControls()}switchControls(){this.btnTai.active=this.tx!=l.ResultType.TAI,this.btnXiu.active=this.tx!=l.ResultType.XIU}get amountLabel(){return this.tx==l.ResultType.TAI?this.lblTai:this.lblXiu}get bettedLabel(){return this.tx==l.ResultType.TAI?this.lblBetedTai:this.lblBetedXiu}betBtn(t=!1){return((t?this.tx==l.ResultType.XIU:this.tx==l.ResultType.TAI)?this.btnTai:this.btnXiu).getComponent(cc.Button)}};o([p(cc.Node)],u.prototype,"btnTai",void 0),o([p(cc.Node)],u.prototype,"btnXiu",void 0),o([p(cc.Label)],u.prototype,"lblTai",void 0),o([p(cc.Label)],u.prototype,"lblXiu",void 0),o([p(c.default)],u.prototype,"bettorQuick",void 0),o([p(cc.Label)],u.prototype,"lblBetedTai",void 0),o([p(cc.Label)],u.prototype,"lblBetedXiu",void 0),o([p(h.default)],u.prototype,"toast",void 0),u=o([d],u),i.default=u,cc._RF.pop()},{"../../../scripts/common/Configs":void 0,"../../../scripts/common/GlobalVariables":void 0,"../../../scripts/common/MenuPanel":void 0,"../../../scripts/common/Tween":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.Toast":"TX.Toast"}],"TX.ChatPanel":[function(t,e,i){"use strict";cc._RF.push(e,"6bb6fhOInZOPKs/b/btof6x","TX.ChatPanel");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/ChatMessage"),n=t("../../../scripts/common/ChatScrollView"),c=t("../../../scripts/common/Configs"),r=t("../../../scripts/common/GlobalVariables"),a=t("../../../scripts/common/MenuPanel"),l=t("../../../scripts/games/loader"),h=t("../../../scripts/networks/MiniGameNetworkClient"),d=t("../../../scripts/networks/Network.InPacket"),p=t("./TX.Cmd"),u=t("./TX.Controller"),{ccclass:f,property:m}=cc._decorator;let g=class extends a.default{constructor(){super(...arguments),this.scrMessage=null,this.lblPinnedChat=null,this.msgTemplate=null,this.edbMessage=null,this.btnSend=null,this.maxMsgs=50,this.pinChatUrl=null}onLoad(){this.node.active=!1,this.horizontal=!0,this.H=this.scrMessage.node.height+this.lblPinnedChat.node.parent.parent.height}subMsg(){h.default.instance.send(new p.cmd.SendScribeChat)}unsubMsg(){h.default.instance.send(new p.cmd.SendUnScribeChat)}onOpen(){super.onOpen(),h.default.instance.addListener(this.eventHandler.bind(this),this),this.subMsg()}onClose(){super.onClose(),h.default.instance.removeListener(this),this.unsubMsg()}openTanLoc(){if(u.default.instance.minimized)return u.default.instance.maximize();l.GameLoader.instance.start("tanloc")}setPinnedChat(t){if(!this.node.active)return;if(!t)return this.lblPinnedChat.node.active=!1;this.lblPinnedChat.string=t;const e=t.match(/https:\/\/[^<\s]+/);this.pinChatUrl=e?e[0]:""}update(){this.scrMessage.node.height=this.H-this.lblPinnedChat.node.parent.parent.height}addMsgs(t){this.node.active&&JSON.parse(t).forEach(t=>this.addMsg(t))}addMsg(t){const e=cc.instantiate(this.msgTemplate);e.setPosition(0,0),e.opacity=0;const i=e.getComponent(s.default);i.maxWidth=this.scrMessage.content.width,i.setContent(t),this.scrMessage.addContentChild(e,"string"==typeof t?void 0:t.id)&&this.cleanUp()}sendChat(){let t=this.edbMessage.string.trim();t.length&&this.btnSend.interactable&&(c.default.Login.IsLogin?(this.btnSend.interactable=!1,h.default.instance.send(new p.cmd.SendChat(unescape(encodeURIComponent(t))))):this.node.dispatchEvent(new r.MyEvent("openLogin",!0)))}onMessageSent(t,e){t==c.default.Login.Nickname&&(this.btnSend.interactable=!0,e&&(this.edbMessage.string=""),this.scrollToBottom(),cc.sys.isBrowser&&this.edbMessage.focus())}scrollToBottom(){this.scrMessage.scrollToBottom(.2)}cleanUp(){this.scrMessage.content.childrenCount>this.maxMsgs&&this.scrMessage.content.children[0].removeFromParent(!0)}eventHandler(t){if(this.node.active)switch((t.inPacket||new d.default(t)).getCmdId()){case p.cmd.Code.LOG_CHAT:{const{message:e,pinChat:i}=new p.cmd.ReceiveLogChat(t);this.setPinnedChat(i),this.addMsgs(e);break}case p.cmd.Code.SEND_CHAT:{const e=new p.cmd.ReceiveSendChat(t),{error:i,nickname:o,message:s,tanLocRankings:n,vipRank:c,id:r}=e;switch(i){case 0:this.addMsg({u:o,tlr:n,id:r,vr:c,m:s}),this.onMessageSent(o,!0);break;case 2:case 3:case 4:default:this.onMessageSent(o,!1)}break}}}actOpenPinChatUrl(){this.pinChatUrl&&cc.sys.openURL(this.pinChatUrl)}};o([m(n.default)],g.prototype,"scrMessage",void 0),o([m(cc.RichText)],g.prototype,"lblPinnedChat",void 0),o([m(cc.Prefab)],g.prototype,"msgTemplate",void 0),o([m(cc.EditBox)],g.prototype,"edbMessage",void 0),o([m(cc.Button)],g.prototype,"btnSend",void 0),g=o([f],g),i.default=g,cc._RF.pop()},{"../../../scripts/common/ChatMessage":void 0,"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/Configs":void 0,"../../../scripts/common/GlobalVariables":void 0,"../../../scripts/common/MenuPanel":void 0,"../../../scripts/games/loader":void 0,"../../../scripts/networks/MiniGameNetworkClient":void 0,"../../../scripts/networks/Network.InPacket":void 0,"./TX.Cmd":"TX.Cmd","./TX.Controller":"TX.Controller"}],"TX.Cmd":[function(t,e,i){"use strict";cc._RF.push(e,"996eaBRFWND87gNsYH7Dy6Q","TX.Cmd"),Object.defineProperty(i,"__esModule",{value:!0}),i.cmd=void 0;const o=t("../../../scripts/networks/Network.OutPacket"),s=t("../../../scripts/common/Configs"),n=t("../../../scripts/networks/Network.InPacket");var c;(function(t){class e{}e.SCRIBE=2e3,e.UNSCRIBE=2001,e.BET=2110,e.HISTORIES=2116,e.GAME_INFO=2111,e.UPDATE_TIME=2112,e.DICES_RESULT=2113,e.RESULT=2114,e.NEW_GAME=2115,e.STREAK=2150,e.STREAK_FINAL=2151,e.STREAK_INFO=2250,e.LOG_CHAT=18003,e.SEND_CHAT=18e3,e.SCRIBE_CHAT=18001,e.UNSCRIBE_CHAT=18002,e.FORCED_LOGOUT=32700,e.HISTORIES_SOICAU=2155,e.LOGIN_REQUIRED=32701,t.Code=e,t.SendStreakInfo=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.STREAK_INFO),this.packHeader(),this.putShort(s.default.GameId.TaiXiu),this.putShort(s.default.App.MONEY_TYPE),this.updateSize()}},t.SendScribe=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.SCRIBE),this.packHeader(),this.putShort(s.default.GameId.TaiXiu),this.putShort(s.default.App.MONEY_TYPE),this.updateSize()}},t.SendSoiCauData=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.HISTORIES_SOICAU),this.packHeader(),this.putShort(s.default.GameId.TaiXiu),this.putShort(s.default.App.MONEY_TYPE),this.updateSize()}},t.SendUnScribe=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.UNSCRIBE),this.packHeader(),this.putShort(s.default.GameId.TaiXiu),this.putShort(s.default.App.MONEY_TYPE),this.updateSize()}},t.SendScribeChat=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.SCRIBE_CHAT),this.packHeader(),this.updateSize()}},t.SendUnScribeChat=class extends o.default{constructor(){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.UNSCRIBE_CHAT),this.packHeader(),this.updateSize()}},t.SendChat=class extends o.default{constructor(t){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.SEND_CHAT),this.packHeader(),this.putString(t),this.updateSize()}},t.SendBet=class extends o.default{constructor(t,i,o,n){super(),this.initData(100),this.setControllerId(1),this.setCmdId(e.BET),this.packHeader(),this.putInt(1),this.putLong(t),this.putLong(i),this.putShort(s.default.App.MONEY_TYPE),this.putShort(o),this.putShort(n),this.updateSize()}},t.ReceiveGameInfo=class extends n.default{constructor(t){super(t),this.gameId=0,this.moneyType=0,this.referenceId=0,this.remainTime=0,this.bettingState=!1,this.potTai=0,this.potXiu=0,this.betTai=0,this.betXiu=0,this.dice1=0,this.dice2=0,this.dice3=0,this.remainTimeRutLoc=0,this.gameId=this.getShort(),this.moneyType=this.getShort(),this.referenceId=this.getLong(),this.remainTime=this.getShort(),this.bettingState=this.getBool(),this.potTai=this.getLong(),this.potXiu=this.getLong(),this.betTai=this.getLong(),this.betXiu=this.getLong(),this.dice1=this.getShort(),this.dice2=this.getShort(),this.dice3=this.getShort(),this.remainTimeRutLoc=this.getShort()}},t.ReceiveUpdateTime=class extends n.default{constructor(t){super(t),this.remainTime=0,this.bettingState=!1,this.potTai=0,this.potXiu=0,this.numBetTai=0,this.numBetXiu=0,this.remainTime=this.getShort(),this.bettingState=this.getBool(),this.potTai=this.getLong(),this.potXiu=this.getLong(),this.numBetTai=this.getShort(),this.numBetXiu=this.getShort()}},t.WinLoseStreakData=class extends n.default{constructor(t){super(t),this.nickName="",this.streak=0,this.isWin=!1,this.referenceId=0,this.nickName=this.getString(),this.streak=this.getInt(),this.isWin=this.getBool(),this.referenceId=this.getLong()}},t.ReceiveDicesResult=class extends n.default{constructor(t){super(t),this.result=0,this.dice1=0,this.dice2=0,this.dice3=0,this.referenceId=0,this.result=this.getShort(),this.dice1=this.getShort(),this.dice2=this.getShort(),this.dice3=this.getShort(),this.referenceId=this.getLong()}},t.ReceiveResult=class extends n.default{constructor(t){super(t),this.moneyType=1,this.totalMoney=0,this.currentMoney=0,this.isJackpot=!1,this.refundMoney=0,this.jackpotMoney=0,this.moneyType=this.getShort(),this.totalMoney=this.getLong(),this.currentMoney=this.getLong(),this.isJackpot=this.getBool(),this.refundMoney=this.getLong(),this.jackpotMoney=this.getLong()}},t.ReceiveNewGame=class extends n.default{constructor(t){super(t),this.referenceId=0,this.remainTimeRutLoc=0,this.referenceId=this.getLong(),this.remainTimeRutLoc=this.getShort()}},t.ReceiveHistories=class extends n.default{constructor(t){super(t),this.data=null,this.data=JSON.parse(this.getString())}},t.ReceiveBet=class extends n.default{constructor(t){super(t),this.result=0,this.currentMoney=0,this.result=this.getError(),this.currentMoney=this.getLong()}},t.ReceiveLogChat=class extends n.default{constructor(t){super(t),this.message="",this.minVipPoint=0,this.timeBan=0,this.userType=0,this.pinChat="",this.message=this.getString(),this.minVipPoint=this.getByte(),this.timeBan=this.getLong(),this.userType=this.getByte(),this.pinChat=this.getString()}},t.ReceiveSendChat=class extends n.default{constructor(t){super(t),this.error=0,this.nickname="",this.message="",this.vipRank=0,this.tanLocRankings=0,this.id="",this.error=this.getError(),this.nickname=this.getString(),this.message=this.getString(),this.vipRank=this.getLong(),this.tanLocRankings=this.getLong(),this.id=this.getString()}}})(c=i.cmd||(i.cmd={})),i.default=c,cc._RF.pop()},{"../../../scripts/common/Configs":void 0,"../../../scripts/networks/Network.InPacket":void 0,"../../../scripts/networks/Network.OutPacket":void 0}],"TX.Controller":[function(t,e,i){"use strict";cc._RF.push(e,"e7b6aBtb2xDz6TtIIFaOul0","TX.Controller");var o,s=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},n=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const c=t("../../../Lobby/src/MiniGameV2"),r=t("../../../scripts/common/Tween"),a=t("../../../scripts/common/UI/EventManager"),l=t("../../../scripts/networks/TaiXiu.SocketClient"),h=t("./TX.BetTimer"),d=t("./TX.Bettor"),p=t("./TX.Dice"),u=t("./TX.MoneyResult"),f=t("./TX.Toast"),m=t("./TX.Interfaces"),g=t("./TX.ResultTimer"),T=t("../../../scripts/common/Configs"),b=t("../../../scripts/common/BroadcastReceiver"),y=t("./TX.DuDay"),v=t("./TX.Loader"),C=t("../../../scripts/common/App"),S=t("../../../scripts/common/Logger/EventLogger"),w=t("../../../Lobby/src/Lobby.Balance"),{ccclass:I,property:X}=cc._decorator;let R=o=class extends c.default{constructor(){super(...arguments),this.lblJackpot=null,this.lblSession=null,this.lblTotalTai=null,this.lblTotalXiu=null,this.lblUserTai=null,this.lblUserXiu=null,this.betTimer=null,this.bettor=null,this.dice=null,this.taiNode=null,this.xiuNode=null,this.moneyResult=null,this.resultTimer=null,this.duday=null,this.tgLight=null,this.togNan=null,this.tgChat=null,this.toast=null,this.ChatPanel=null,this.wonData=null,this.jpData=null,this.ws=l.default.instance,this.myBettedSessionId=0}onLoad(){super.onLoad(),o.instance=this,this.initWs(),this.pingYourInfo(),this.stopTxAnim(),a.default.on(m.TXEvent.SHOW_SCORE,this.playTxAnim,this)}show(){super.show(),this.ws.connect(),C.default.instance.buttonMiniGame.showTimeTaiXiu(!1),S.EventLogger.logEventWithParams(S.EventNames.MINI_GAME,{gameName:"TaiXiu"})}_onShowed(){super._onShowed(),C.default.registerGame(this)}softDismiss(){if(this.minimized)return this.maximize();this.bettor.close(),this.dismiss(),C.default.instance.buttonMiniGame.showTimeTaiXiu(!0),C.default.unregisterGame(this)}initWs(){this.ws.connect(),this.ws.on("your-current-session-info",this.onMySession.bind(this)),this.ws.on("session-info",this.onSessionInfo.bind(this)),this.ws.on("tick-update",this.onTickUpdate.bind(this)),this.ws.on("bet-result",this.onBetResult.bind(this)),this.ws.on("settled_balance",this.onSettledBalance.bind(this)),this.ws.on("bet_refund",this.onBetRefund.bind(this)),this.ws.on("session-result",this.onSessionResult.bind(this)),this.ws.on("won-session",this.onWonSession.bind(this)),this.ws.on("won-jackpot",this.onWonJp.bind(this)),this.ws.on("streak-update",this.onStreak.bind(this)),this.ws.on("new-session",this.onNewSession.bind(this)),this.ws.on("exception",this.onException.bind(this)),this.ws.on("connect",this.onWsConnected.bind(this)),this.ws.on("connect_error",this.onWsConnectError.bind(this))}bet(){const{tx:t,amount:e}=this.bettor;this.betTimer.state===m.SessionState.BETTING?this.betTimer.remainTime<6?this.toast.showMsg("\u0110\xe3 h\u1ebft th\u1eddi gian c\u01b0\u1ee3c!"):0!==e?this.ws.emit("bet",{type:t,amount:e}):this.toast.showMsg("Vui l\xf2ng ch\u1ecdn ti\u1ec1n c\u01b0\u1ee3c!"):this.toast.showMsg("Vui l\xf2ng ch\u1edd phi\xean m\u1edbi!")}onBetBtnClicked(t,e){if(this.minimized)return this.maximize();this.bettor.open(t,e)}pingYourInfo(){this.ws.emit("get-current-my-info")}onMySession(t){const{betAmount:e,type:i,streakType:o,streakLength:s,sessionId:n}=t;this.myBettedSessionId=n,this.bettor.resetBetted(),e>0&&this.bettor.customBetted(i,e),this.duday.handleStreakData({type:o,streakLength:s})}onSessionInfo(t){const{state:e,settledBalance:i,id:o,dices:s}=t;e===m.SessionState.BETTING&&(this.initNewSession(),this.myBettedSessionId!=o&&this.bettor.resetBetted()),e!=m.SessionState.BETTING&&this.updateTotalBet({TAI:i,XIU:i}),s&&s.length>0&&this.dice.draw(s)}onTickUpdate(t){this.updateTime(t),this.updateJp(t.jackpot),this.updateSession(t.id),this.updateTotalPlayer(t.data.totalUsersPerType),this.betTimer.state===m.SessionState.BETTING&&this.updateTotalBet(t.data.totalAmountPerType)}updateTime(t){const{state:e,subTick:i}=t;switch(e){case m.SessionState.BETTING:this.betTimer._start(i);break;case m.SessionState.REFUNDING:this.betTimer.refunding();break;case m.SessionState.AWARDING:this.resultTimer._start(i),this.betTimer.stop(!1),this.dice.checkNan(i);break;default:this.betTimer.stop(!1)}this.betTimer.state=e}updateJp(t){r.default.numberTo(this.lblJackpot,t,.5)}updateSession(t){this.lblSession.string=`# ${t}`}updateTotalPlayer(t){r.default.numberTo(this.lblUserTai,t.TAI,.3),r.default.numberTo(this.lblUserXiu,t.XIU,.3)}updateTotalBet({TAI:t,XIU:e}){r.default.numberTo(this.lblTotalTai,t,.3,void 0,void 0,{bounce:!0,bounceBy:1.15}),r.default.numberTo(this.lblTotalXiu,e,.3,void 0,void 0,{bounce:!0,bounceBy:1.15})}onBetResult(t){this.bettor.handleResult(),this.toast.showMsg("\u0110\u1eb7t c\u01b0\u1ee3c th\xe0nh c\xf4ng."),this.updateBalance(t.postBalance)}onSettledBalance({amount:t}){this.toast.showMsg("Tr\u1ea3 ti\u1ec1n c\xe2n c\u1eeda"),this.updateTotalBet({TAI:t,XIU:t})}onBetRefund(t){this.moneyResult.show(t.amount,{isRefund:!0}),this.bettor.updateBetted(t.amount),this.updateBalance(t.postBalance)}onSessionResult(t){this.dice.draw(t.dices)}onWonSession(t){this.dice.isNan?this.wonData=t:this.showWonMoney(t)}onWonJp(t){this.jpData=t,this.dice.isNan||this.showWonJp()}showWonJp(){const{balance:t,prize:e}=this.jpData;v.default.instance.showJpEffect(e),this.updateBalance(t),this.scheduleOnce(()=>{w.default.getInstance().fetchBalance()},3)}onStreak(t){this.duday.handleStreakData(t)}onNewSession(t){this.toast.showMsg("M\u1eddi b\u1ea1n \u0111\u1eb7t c\u01b0\u1ee3c. Ch\xfac may m\u1eafn nh\xe9!"),this.dice.spinDia(),this.bettor.resetBetted(t.id),this.initNewSession(),a.default.emit(m.TXEvent.NEW_SESSION)}initNewSession(){this.dice.hide(!1),this.resultTimer.stop(),this.stopTxAnim(),this.wonData=null,this.jpData=null}onException(t){this.toast.showMsg(t.message)}onWsConnected(){this.stopTxAnim(),this.dice.clearAnim(),a.default.emit(m.TXEvent.RECONNECTED),w.default.getInstance().fetchBalance()}onWsConnectError(){}playTxAnim(t){var e,i;this.setTxAnimState(this.taiNode,t>10),this.setTxAnimState(this.xiuNode,t<11),(null===(e=this.jpData)||void 0===e?void 0:e.prize)>0&&this.showWonJp(),(null===(i=this.wonData)||void 0===i?void 0:i.prize)>0&&this.showWonMoney(this.wonData)}stopTxAnim(){this.setTxAnimState(this.taiNode,!1),this.setTxAnimState(this.xiuNode,!1)}setTxAnimState(t,e){const[i,o,s]=t.children;i.active=e,o.active=!e,s.active=e}showWonMoney(t){this.moneyResult.show(t.prize),this.updateBalance(t.balance)}updateBalance(t){T.default.Login.Coin=t,b.default.send(b.default.USER_UPDATE_COIN)}togLight(){this.tgLight.isChecked?this.tgLight.uncheck():this.tgLight.check(),this.minimized?this.maximize():this.bg&&(this.tgLight.isChecked?this.tgLight.uncheck():this.tgLight.check(),this.bg.runAction(cc.fadeTo(1,this.tgLight.isChecked?86:220)))}toggleNan(){if(this.togNan.isChecked?this.togNan.uncheck():this.togNan.check(),this.minimized)return this.maximize();this.togNan.isChecked?this.togNan.uncheck():this.togNan.check()}toggleChat(){return n(this,void 0,void 0,function*(){if(this.tgChat.isChecked?this.tgChat.uncheck():this.tgChat.check(),this.minimized)return this.maximize();this.tgChat.isChecked?this.tgChat.uncheck():this.tgChat.check(),this.ChatPanel||(yield this.loadChatPanel()),this.ChatPanel.toggle(!0)})}loadChatPanel(){return n(this,void 0,void 0,function*(){const t=this.gamePlay.children[0];this.ChatPanel=yield v.default.instance.loadChatPanel(t),this.bindDragNodeEvents(this.ChatPanel.node)})}};s([X(cc.Label)],R.prototype,"lblJackpot",void 0),s([X(cc.Label)],R.prototype,"lblSession",void 0),s([X(cc.Label)],R.prototype,"lblTotalTai",void 0),s([X(cc.Label)],R.prototype,"lblTotalXiu",void 0),s([X(cc.Label)],R.prototype,"lblUserTai",void 0),s([X(cc.Label)],R.prototype,"lblUserXiu",void 0),s([X(h.default)],R.prototype,"betTimer",void 0),s([X(d.default)],R.prototype,"bettor",void 0),s([X(p.default)],R.prototype,"dice",void 0),s([X(cc.Node)],R.prototype,"taiNode",void 0),s([X(cc.Node)],R.prototype,"xiuNode",void 0),s([X(u.default)],R.prototype,"moneyResult",void 0),s([X(g.default)],R.prototype,"resultTimer",void 0),s([X(y.default)],R.prototype,"duday",void 0),s([X(cc.Toggle)],R.prototype,"tgLight",void 0),s([X(cc.Toggle)],R.prototype,"togNan",void 0),s([X(cc.Toggle)],R.prototype,"tgChat",void 0),s([X(f.default)],R.prototype,"toast",void 0),R=o=s([I],R),i.default=R,cc._RF.pop()},{"../../../Lobby/src/Lobby.Balance":void 0,"../../../Lobby/src/MiniGameV2":void 0,"../../../scripts/common/App":void 0,"../../../scripts/common/BroadcastReceiver":void 0,"../../../scripts/common/Configs":void 0,"../../../scripts/common/Logger/EventLogger":void 0,"../../../scripts/common/Tween":void 0,"../../../scripts/common/UI/EventManager":void 0,"../../../scripts/networks/TaiXiu.SocketClient":void 0,"./TX.BetTimer":"TX.BetTimer","./TX.Bettor":"TX.Bettor","./TX.Dice":"TX.Dice","./TX.DuDay":"TX.DuDay","./TX.Interfaces":"TX.Interfaces","./TX.Loader":"TX.Loader","./TX.MoneyResult":"TX.MoneyResult","./TX.ResultTimer":"TX.ResultTimer","./TX.Toast":"TX.Toast"}],"TX.Dice":[function(t,e,i){"use strict";cc._RF.push(e,"4c07415hHtJwYRqiOxafOGl","TX.Dice");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Tween"),n=t("../../../scripts/common/UI/EventManager"),c=t("./TX.Interfaces"),r=t("./TX.Nan"),{ccclass:a,property:l}=cc._decorator;let h=class extends cc.Component{constructor(){super(...arguments),this.dia=null,this.lblScore=null,this.Nan=null,this.dices=null,this.score=null}onLoad(){this.lblScore=this.node.getComponentInChildren(cc.Label),this.hide(!1)}start(){this.spinDia()}draw(t){t&&0!==t.length&&(this.stopSpinDia(),this.resetNodeState(),this.score=t.reduce((t,e)=>t+e,0),this.isNan&&this.Nan.show(this.showScore.bind(this)),this.rollDice(t))}rollDice(t){const[e,i,o]=this.dices.getComponentsInChildren(sp.Skeleton);e.setAnimation(0,`Dice${t[0]}`,!1),i.setAnimation(0,`Dice${t[1]}`,!1),o.setAnimation(0,`Dice${t[2]}`,!1);const s=Math.floor(90*Math.random()),n=Math.floor(120+90*Math.random()),c=Math.floor(-30-150*Math.random());e.node.angle=-s,i.node.angle=-n,o.node.angle=-c,e.setCompleteListener(()=>{this.isNan||this.showScore()})}checkNan(t){this.isNan&&6===t&&this.Nan.hide()}get isNan(){return this.Nan.tog.isChecked}resetNodeState(){this.node.opacity=255,this.lblScore.node.parent.active=!1}hide(t=!0){t?(this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.fadeOut(1),cc.callFunc(()=>{})))):this.node.opacity=0,this.Nan.hide(),this.clearAnim()}showScore(){const t=this.score;this.lblScore.node.parent.active=!0,s.default.numberTo(this.lblScore,t,.3,void 0,!0,{bounce:!0}),n.default.emit(c.TXEvent.SHOW_SCORE,t)}spinDia(){this.dia.stopAllActions(),this.dia.runAction(cc.repeatForever(cc.rotateBy(2,360)))}stopSpinDia(){this.dia.stopAllActions(),this.dia.runAction(cc.repeatForever(cc.rotateBy(10,360)))}clearAnim(){this.dices.getComponentsInChildren(sp.Skeleton).forEach(t=>{t.setCompleteListener(null)})}};o([l(cc.Node)],h.prototype,"dia",void 0),o([l(cc.Label)],h.prototype,"lblScore",void 0),o([l(r.default)],h.prototype,"Nan",void 0),o([l(cc.Node)],h.prototype,"dices",void 0),h=o([a],h),i.default=h,cc._RF.pop()},{"../../../scripts/common/Tween":void 0,"../../../scripts/common/UI/EventManager":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.Nan":"TX.Nan"}],"TX.DuDay":[function(t,e,i){"use strict";cc._RF.push(e,"d215bLVS41Ic6QeTtaj1i+p","TX.DuDay");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/App"),n=t("../../../scripts/common/UI/ResourceLoader"),{ccclass:c,property:r}=cc._decorator;let a=class extends cc.Component{constructor(){super(...arguments),this.lblWinNumber=null,this.lblLoseNumber=null,this.loader=n.default.getInstance()}start(){this.lblWinNumber.string="D\xc2Y TH\u1eaeNG: 0",this.lblLoseNumber.string="D\xc2Y THUA: 0"}handleStreakData(t){const{streakLength:e,type:i}=t,o="WIN"===i,s=o?e:0,n=o?0:e;this.lblWinNumber.string=`D\xc2Y TH\u1eaeNG: ${s}`,this.lblLoseNumber.string=`D\xc2Y THUA: ${n}`}openEventDuDay(t,e){const i={bundleName:"Prefabs",prefabPath:"Lobby/PopupEvent",popupName:"PopupEvent",className:"Lobby.PopupEvent",showMethod:"showDuDay",showData:e,preferParent:s.default.instance.node};this.loader.loadAndShowPrefab(i)}};o([r(cc.Label)],a.prototype,"lblWinNumber",void 0),o([r(cc.Label)],a.prototype,"lblLoseNumber",void 0),a=o([c],a),i.default=a,cc._RF.pop()},{"../../../scripts/common/App":void 0,"../../../scripts/common/UI/ResourceLoader":void 0}],"TX.Histories":[function(t,e,i){"use strict";cc._RF.push(e,"ed5a9uyfYZMT6KWlPP1azmK","TX.Histories");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/HttpV2"),c=t("../../../scripts/common/UI/EventManager"),r=t("./TX.Interfaces"),a=t("./TX.Loader"),{ccclass:l,property:h}=cc._decorator;let d=class extends cc.Component{constructor(){super(...arguments),this.sprFrameTai=null,this.sprFrameXiu=null}onLoad(){this.initBlinkEffect(),this.loadData(),this.node.opacity=0,c.default.on(r.TXEvent.NEW_SESSION,this.onNewSession,this),c.default.on(r.TXEvent.RECONNECTED,this.onNewSession,this)}onNewSession(){this.loadData()}initBlinkEffect(){const t=this.node.children;if(t.length>0){const e=t[t.length-1],i=cc.repeatForever(cc.sequence(cc.fadeTo(.3,150),cc.fadeTo(.3,255)));e.runAction(i)}}loadData(){return s(this,void 0,void 0,function*(){try{const e=yield n.default.get(`${r.txApi}lite-sessions`);this.populateUI(e.list.reverse()),this.node.opacity=255}catch(t){cc.error("Failed to load data:",t)}})}populateUI(t){this.node.children.forEach((e,i)=>{const o=t[i];o&&this.updateNodeWithRecord(e,o)})}updateNodeWithRecord(t,e){const i="TAI"===e.resultTruyenThong?this.sprFrameTai:this.sprFrameXiu;t.getComponent(cc.Sprite).spriteFrame=i,t._sessionData=e,t.off("click"),t.on("click",()=>{const e=t._sessionData.id;a.default.instance.showPopupHistoryDetail(e)})}};o([h(cc.SpriteFrame)],d.prototype,"sprFrameTai",void 0),o([h(cc.SpriteFrame)],d.prototype,"sprFrameXiu",void 0),d=o([l],d),i.default=d,cc._RF.pop()},{"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/UI/EventManager":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.Loader":"TX.Loader"}],"TX.Interfaces":[function(t,e,i){"use strict";cc._RF.push(e,"543d3r30VtP9o4HbtMqxoyS","TX.Interfaces"),Object.defineProperty(i,"__esModule",{value:!0}),i.txApi=i.ResultType=i.TXEvent=i.SessionState=void 0,function(t){t.PREPARE_TO_START="PREPARE_TO_START",t.BETTING="BETTING",t.REFUNDING="REFUNDING",t.SHOW_RESULT="SHOW_RESULT",t.AWARDING="AWARDING",t.FINISH="FINISH"}(i.SessionState||(i.SessionState={})),function(t){t.NEW_SESSION="TX_NEW_SESSION",t.SHOW_SCORE="TX_SHOW_SCORE",t.RECONNECTED="TX_RECONNECTED"}(i.TXEvent||(i.TXEvent={})),function(t){t.XIU="XIU",t.TAI="TAI"}(i.ResultType||(i.ResultType={})),i.txApi="https://wtx.tele68.com/v1/tx/",cc._RF.pop()},{}],"TX.Loader":[function(t,e,i){"use strict";cc._RF.push(e,"3f381Jux2RPTZ8zIJHZxIOh","TX.Loader");var o,s=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},n=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const c=t("../../../scripts/common/UI/ResourceLoader"),r=t("../../../scripts/common/UI/ResourcePreloader"),a=t("./TX.ChatPanel"),l=t("./TX.Controller"),{ccclass:h}=cc._decorator;let d=o=class extends cc.Component{constructor(){super(...arguments),this.preloader=r.default.getInstance(),this.loader=c.default.getInstance()}onLoad(){o.instance=this}start(){this.preloadBundle()}preloadBundle(){this.preloader.preloadPrefabsFromBundle("TaiXiu",["Prefabs/PopupHistory","Prefabs/PopupSoiCau","Prefabs/PopupRank","Prefabs/PopupHistoryDetail","Prefabs/PopupJackpotHistory","Prefabs/PopupGuide","Prefabs/ChatPanel","Prefabs/PopupJackpotEffect"])}showPopupHistory(){this.showPopup("PopupHistory")}showPopupGuide(){this.showPopup("PopupGuide")}showPopupRank(){this.showPopup("PopupRank")}showPopupSoiCau(){this.showPopup("PopupSoiCau")}showJpHistory(){this.showPopup("PopupJackpotHistory")}showPopupHistoryDetail(t){this.showPopup("PopupHistoryDetail",t,"open")}showJpEffect(t){this.showPopup("PopupJackpotEffect",t,"initJp")}showPopup(t,e,i){if(l.default.instance.minimized)return void l.default.instance.maximize();const o={bundleName:"TaiXiu",prefabPath:`Prefabs/${t}`,popupName:t,className:`TX.${t}`,preferParent:this.node,showData:e,showMethod:i};this.loader.loadAndShowPrefab(o,!1)}loadChatPanel(t){return n(this,void 0,void 0,function*(){const e={bundleName:"TaiXiu",prefabPath:"Prefabs/ChatPanel",popupName:"ChatPanel",className:"TaiXiu.ChatPanel",showMethod:"onOpen",preferParent:t};return(yield this.loader.loadPrefabInstance(e)).getComponent(a.default)})}fTime(t){const[e,i]=t.split(" "),[o,s,n]=i.split("/"),[c,r]=e.split(":");return`${o}/${s}/${n.slice(2)} ${c}:${r}`}};d=o=s([h],d),i.default=d,cc._RF.pop()},{"../../../scripts/common/UI/ResourceLoader":void 0,"../../../scripts/common/UI/ResourcePreloader":void 0,"./TX.ChatPanel":"TX.ChatPanel","./TX.Controller":"TX.Controller"}],"TX.MoneyResult":[function(t,e,i){"use strict";cc._RF.push(e,"8fdd68fH15D24Bl2zUdHzNm","TX.MoneyResult");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Utils"),{ccclass:n}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.speed=1}onLoad(){this.Container=this.node.children[0],this.lbl=this.Container.getComponentInChildren(cc.Label),this.hide(!1)}show(t,e={}){const{speed:i=.5,autoHide:o=!0,duration:n=3,isRefund:c=!1}=e;this.speed=i,this.Container.stopAllActions(),this.Container.setPosition(0,0),this.Container.opacity=0;const r=c?"Ho\xe0n: ":"Th\u1eafng: ";this.lbl.string=`${r}+${s.default.formatNumber(t)}`;const a=cc.sequence(cc.spawn(cc.moveBy(i/3,0,10),cc.fadeIn(i)),cc.callFunc(()=>{o&&this.Container.runAction(cc.sequence(cc.delayTime(n),cc.fadeOut(i)))}));this.Container.runAction(a)}hide(t=!0){t&&this.Container.opacity?(this.Container.stopAllActions(),this.Container.runAction(cc.fadeOut(this.speed))):this.Container.opacity=0}};c=o([n],c),i.default=c,cc._RF.pop()},{"../../../scripts/common/Utils":void 0}],"TX.Nan":[function(t,e,i){"use strict";cc._RF.push(e,"4e0ceDtVUJL/4aCCSLaf/fa","TX.Nan");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s,property:n}=cc._decorator;let c=class extends cc.Component{constructor(){super(...arguments),this.tog=null,this.offset=150,this.speed=.8,this.diaUpThrowing=!1,this.isHiding=!1}onLoad(){this.batUp=this.node.children[0],this.batUp.opacity=0,this.tog.uncheck(),this.batUp.on(cc.Node.EventType.TOUCH_MOVE,this.onDiaUpMove.bind(this),this),this.batUp.active=!1}show(t){this.showScore=t,this.batUp.stopAllActions(),this.batUp.opacity=0,this.batUp.active=!0,this.batUp.x=this.offset,this.batUp.y=this.offset,this.batUp.runAction(cc.sequence(cc.delayTime(.5),cc.spawn(cc.fadeIn(this.speed),cc.moveTo(this.speed,0,0))))}hide(){var t;!this.isHiding&&(null===(t=this.batUp)||void 0===t?void 0:t.active)&&(this.isHiding=!0,this.batUp.stopAllActions(),this.batUp.setPosition(0,0),cc.tween(this.batUp).parallel(cc.tween().to(this.speed,{opacity:0}),cc.tween().to(this.speed,{position:cc.v2(this.offset,this.offset)})).call(()=>{this.batUp.active=!1,this.diaUpThrowing=!1,this.isHiding=!1,this.showScore&&this.tog.isChecked&&(this.showScore(),this.showScore=null)}).start())}onDiaUpMove(t){if(t.stopPropagation(),this.diaUpThrowing)return;const e=this.batUp.position;if(e.x+=t.getDeltaX(),e.y+=t.getDeltaY(),this.batUp.position=e,this.findDistance(0,0,e.x,e.y)>230){this.diaUpThrowing=!0,this.batUp.stopAllActions();const t=3;this.batUp.runAction(cc.sequence(cc.spawn(cc.fadeOut(this.speed/t),cc.moveBy(this.speed/t,e.x,e.y)),cc.callFunc(()=>{this.batUp.active=!1,this.diaUpThrowing=!1}))),this.showScore&&(this.showScore(),this.showScore=null)}}findDistance(t,e,i,o){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-o,2))}};o([n(cc.Toggle)],c.prototype,"tog",void 0),c=o([s],c),i.default=c,cc._RF.pop()},{}],"TX.PopupGuide":[function(t,e,i){"use strict";cc._RF.push(e,"d7d56WYZf5NSpop4q08cqM6","TX.PopupGuide");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Dialog"),{ccclass:n,property:c}=cc._decorator;let r=class extends s.default{};r=o([n],r),i.default=r,cc._RF.pop()},{"../../../scripts/common/Dialog":void 0}],"TX.PopupHistoryDetail":[function(t,e,i){"use strict";cc._RF.push(e,"eb43cVyQPVCGIlowrbfD2/O","TX.PopupHistoryDetail");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/ChatScrollView"),c=t("../../../scripts/common/Dialog"),r=t("../../../scripts/common/InlineLoading"),a=t("../../../scripts/common/Utils"),l=t("./TX.Interfaces"),h=t("../../../scripts/common/HttpV2"),d=t("lodash"),{ccclass:p,property:u}=cc._decorator;let f=class extends c.default{constructor(){super(...arguments),this.scrollViewT=null,this.scrollViewX=null,this.inlineLoadingPref=null,this.Top=null,this.itemBg=new Array,this.sprAtlasDices=null,this.lblTongCuocT=null,this.lblTongCuocX=null,this.lblTongTraT=null,this.lblTongTraX=null,this.diceResultNode=null,this.bottomNode=null,this.itemTemplate=null,this.LIMIT=10,this.lastT={refId:void 0,idx:0},this.lastX={refId:void 0,idx:0}}onLoad(){this.scrollViewT.node.on("scroll-to-bottom",this.loadBeforeT.bind(this),this),this.scrollViewX.node.on("scroll-to-bottom",this.loadBeforeX.bind(this),this);const t=cc.instantiate(this.inlineLoadingPref);t.parent=this.scrollViewT.content.parent,this.inlineLoadingT=t.getComponent(r.default);const e=cc.instantiate(this.inlineLoadingPref);e.parent=this.scrollViewX.content.parent,this.inlineLoadingX=e.getComponent(r.default)}open(t){super.show(),this.sessionId=t,this.loadOverviewInfo(t)}_onDismissed(){this.cleanUp(),super._onDismissed()}loadOverviewInfo(t,e){return s(this,void 0,void 0,function*(){this.setControlsInteractable(!1);try{const o=yield h.default.get(`${l.txApi}session-summary`,{sessionId:t});if(this.setControlsInteractable(!0),!o.point)return void(e&&(e.interactable=!1));this.cleanUp(),this.sessionId=o.id,this.fillTopTaiOrXiu(o.point),o.dices.forEach((t,e)=>{const i=this.diceResultNode.getComponentsInChildren(cc.Sprite)[e];i&&(i.spriteFrame=this.sprAtlasDices.getSpriteFrame("dice"+t))});const s=this.diceResultNode.getComponentInChildren(cc.Label);s&&(s.string=`= ${o.point}`);const[n,c]=this.bottomNode.getComponentsInChildren(cc.Label);n.string=`Phi\xean: #${t}`,c.string=o.timestamp;const{betSummaries:r}=o.overall,d=r.find(t=>"XIU"===t.type)||{totalAmount:0,totalRefund:0},p=r.find(t=>"TAI"===t.type)||{totalAmount:0,totalRefund:0};this.lblTongCuocT.string=a.default.formatNumber(p.totalAmount),this.lblTongTraT.string=a.default.formatNumber(p.totalRefund),this.lblTongCuocX.string=a.default.formatNumber(d.totalAmount),this.lblTongTraX.string=a.default.formatNumber(d.totalRefund),yield Promise.all([this.loadBeforeT(),this.loadBeforeX()])}catch(i){cc.error("Failed to load data:",i)}})}fillTopTaiOrXiu(t){const[e,i]=this.Top.children;e.stopAllActions(),i.stopAllActions(),(t>10?e:i).runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.25,1.15),cc.scaleTo(.25,1))))}loadBeforeT(){return s(this,void 0,void 0,function*(){if(this.fetchingT)return;this.fetchingT=!0,this.scrollViewT.node.getChildByName("EmptyMsg").active=!1,this.inlineLoadingT.show(this.lastT.refId?1:0);const t={betSide:l.ResultType.TAI,sessionId:this.sessionId,limit:this.LIMIT,beforeId:this.lastT.refId||void 0};try{const i=yield h.default.get(`${l.txApi}session-details`,t);(null==i?void 0:i.length)&&(this.fetchingT=!1,this.bindDataToList(i,this.lastT,this.scrollViewT.content))}catch(e){cc.error("Failed to load data:",e)}finally{this.inlineLoadingT.hide(),this.checkShowEmptyMsgT()}})}loadBeforeX(){return s(this,void 0,void 0,function*(){if(this.fetchingX)return;this.fetchingX=!0,this.scrollViewX.node.getChildByName("EmptyMsg").active=!1,this.inlineLoadingX.show(this.lastX.refId?1:0);const t={betSide:l.ResultType.XIU,sessionId:this.sessionId,limit:this.LIMIT,beforeId:this.lastX.refId||void 0};try{const i=yield h.default.get(`${l.txApi}session-details`,t);(null==i?void 0:i.length)&&(this.fetchingX=!1,this.bindDataToList(i,this.lastX,this.scrollViewX.content))}catch(e){cc.error("Failed to load data:",e)}finally{this.inlineLoadingX.hide(),this.checkShowEmptyMsgX()}})}bindDataToList(t,e,i){t.forEach((o,s)=>{const n=cc.instantiate(this.itemTemplate);n.parent=i;const[c,r,l,h]=n.getComponentsInChildren(cc.Label),{placed_at:d,nickname:p,amount:u,refund:f,_id:m}=o;c.string=this.fTime(d),r.string=p,l.string=a.default.formatNumber(u),h.string=a.default.formatNumber(f),n.getComponent(cc.Sprite).spriteFrame=this.itemBg[s%2?0:1],s===t.length-1&&(e.refId=m),n.x=0})}cleanUp(){this.sessionId=void 0,this.scrollViewT.content.removeAllChildren(!0),this.lastT={refId:void 0,idx:0},this.fetchingT=!1,this.scrollViewX.content.removeAllChildren(!0),this.lastX={refId:void 0,idx:0},this.fetchingX=!1}fTime(t){const e=Math.floor(+t/60),i=+t%60;return`${d.padStart(e.toString(),2,"0")}:${d.padStart(i.toString(),2,"0")}`}checkShowEmptyMsgT(){this.scrollViewT.node.getChildByName("EmptyMsg").active=!this.scrollViewT.content.childrenCount}checkShowEmptyMsgX(){this.scrollViewX.node.getChildByName("EmptyMsg").active=!this.scrollViewX.content.childrenCount}setControlsInteractable(t){this.bottomNode.getComponentsInChildren(cc.Button).forEach(e=>e.interactable=t)}goToOtherRefId({currentTarget:t},e){const i=this.sessionId+ +e;this.loadOverviewInfo(i,t.getComponent(cc.Button))}};o([u(n.default)],f.prototype,"scrollViewT",void 0),o([u(n.default)],f.prototype,"scrollViewX",void 0),o([u(cc.Prefab)],f.prototype,"inlineLoadingPref",void 0),o([u(cc.Node)],f.prototype,"Top",void 0),o([u([cc.SpriteFrame])],f.prototype,"itemBg",void 0),o([u(cc.SpriteAtlas)],f.prototype,"sprAtlasDices",void 0),o([u(cc.Label)],f.prototype,"lblTongCuocT",void 0),o([u(cc.Label)],f.prototype,"lblTongCuocX",void 0),o([u(cc.Label)],f.prototype,"lblTongTraT",void 0),o([u(cc.Label)],f.prototype,"lblTongTraX",void 0),o([u(cc.Node)],f.prototype,"diceResultNode",void 0),o([u(cc.Node)],f.prototype,"bottomNode",void 0),o([u(cc.Node)],f.prototype,"itemTemplate",void 0),f=o([p],f),i.default=f,cc._RF.pop()},{"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/Dialog":void 0,"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/InlineLoading":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces",lodash:void 0}],"TX.PopupHistory":[function(t,e,i){"use strict";cc._RF.push(e,"a396aGoHKlJpLT/ZvUhILIg","TX.PopupHistory");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/ChatScrollView"),c=t("../../../scripts/common/Dialog"),r=t("../../../scripts/common/HttpV2"),a=t("../../../scripts/common/InlineLoading"),l=t("../../../scripts/common/Utils"),h=t("./TX.Interfaces"),d=t("./TX.Loader"),{ccclass:p,property:u}=cc._decorator;let f=class extends c.default{constructor(){super(...arguments),this.scrollView=null,this.itemBg=new Array,this.itemTemplate=null,this.inlineLoadingPref=null,this.LIMIT=12,this.beforeId=void 0}onLoad(){const t=cc.instantiate(this.inlineLoadingPref);t.parent=this.scrollView.content.parent,this.inlineLoading=t.getComponent(a.default),this.scrollView.node.on("scroll-to-bottom",this.loadData.bind(this),this),this.scrollView.content.parent.getChildByName("ItemTemplateContainer").active=!1}show(){super.show(),this.loadData()}_onDismissed(){super._onDismissed(),this.cleanUp()}loadData(){return s(this,void 0,void 0,function*(){if(!this.fetching){this.fetching=!0,this.scrollView.node.getChildByName("EmptyMsg").active=!1,this.inlineLoading.show(this.beforeId?1:0);try{const e=yield r.default.get(`${h.txApi}bet`,{limit:this.LIMIT,beforeId:this.beforeId});this.populateUI(e)}catch(t){cc.error("Error loading data:",t.message)}finally{this.inlineLoading.hide()}}})}populateUI(t){t.length&&(this.fetching=!1),t.forEach((e,i)=>{const o=cc.instantiate(this.itemTemplate);o.parent=this.scrollView.content;const[s,n,c,r,a,p,u]=o.getComponentsInChildren(cc.Label),{_id:f,time:m,session_id:g,type:T,amount:b,refund:y,won:v,resultTruyenThong:C,dices:S}=e;s.string=d.default.instance.fTime(m),n.string=`#${g}`,c.string=T===h.ResultType.TAI?"T\xe0i":"X\u1ec9u",r.string=l.default.formatNumber(b),p.string=l.default.formatNumber(y),u.string=l.default.formatNumber(v);const w=S&&S.length>0?S.join("-"):"";a.string=C?C===h.ResultType.TAI?`T\xe0i (${w})`:`X\u1ec9u (${w})`:"...",o.getComponent(cc.Sprite).spriteFrame=this.itemBg[i%2?0:1],i===t.length-1&&(this.beforeId=f)}),this.checkShowEmptyMsg()}cleanUp(){this.scrollView.content.removeAllChildren(!0),this.fetching=!1,this.beforeId=void 0}checkShowEmptyMsg(){this.scrollView.node.getChildByName("EmptyMsg").active=!this.scrollView.content.childrenCount}};o([u(n.default)],f.prototype,"scrollView",void 0),o([u([cc.SpriteFrame])],f.prototype,"itemBg",void 0),o([u(cc.Node)],f.prototype,"itemTemplate",void 0),o([u(cc.Prefab)],f.prototype,"inlineLoadingPref",void 0),f=o([p],f),i.default=f,cc._RF.pop()},{"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/Dialog":void 0,"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/InlineLoading":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.Loader":"TX.Loader"}],"TX.PopupJackpotEffect":[function(t,e,i){"use strict";cc._RF.push(e,"8824fnJ7MtJTY16SG/wrnZE","TX.PopupJackpotEffect");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Dialog"),n=t("../../../scripts/common/Tween"),{ccclass:c}=cc._decorator;let r=class extends s.default{constructor(){super(...arguments),this.spine=null,this.moneyWonlbl=null}onLoad(){this.moneyWonlbl=this.node.getComponentInChildren(cc.Label),this.spine=this.node.getComponentInChildren(sp.Skeleton),this.moneyWonlbl.string=""}initJp(t){super.show(),this.spine.node.active=!0,this.spine.setAnimation(0,"BC_NoJackpot",!0),this.scheduleOnce(()=>{n.default.numberTo(this.moneyWonlbl,t,.5,void 0,!1,{bounce:!0})},1),this.scheduleOnce(()=>{this.spine.setCompleteListener(null),this.spine.node.active=!1,this.moneyWonlbl.string="",this.dismiss()},10)}};r=o([c],r),i.default=r,cc._RF.pop()},{"../../../scripts/common/Dialog":void 0,"../../../scripts/common/Tween":void 0}],"TX.PopupJackpotHistoryDetail":[function(t,e,i){"use strict";cc._RF.push(e,"160cdQ/82NESZsU+lzr5lHc","TX.PopupJackpotHistoryDetail");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/ChatScrollView"),n=t("../../../scripts/common/Utils"),c=t("./TX.Interfaces"),{ccclass:r,property:a}=cc._decorator;let l=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.itemBg=new Array,this.dices=new Array,this.itemTemplate=null,this.dicesNode=null,this.lblTime=null,this.lblTotal=null,this.listColor=["#FFFF00","#00FF47","#FF0066"]}onLoad(){this.scrollView.content.parent.getChildByName("ItemTemplateContainer").active=!1}show(t){this.lblTime.string=t.time,this.lblTotal.string=n.default.formatNumber(t.jackpotAmount);const[e,i,o]=this.dicesNode.getComponentsInChildren(cc.Sprite),s=t.result===c.ResultType.TAI?1:0;i.spriteFrame=e.spriteFrame=o.spriteFrame=this.dices[s],t.users.forEach((t,e)=>{const i=cc.instantiate(this.itemTemplate);i.parent=this.scrollView.content;const[o,s,c]=i.getComponentsInChildren(cc.Label);o.string=`${e+1}`,s.string=t[0],c.string=n.default.formatNumber(t[1]),this.fillTopColor(o,e,s,c),i.getComponent(cc.Sprite).spriteFrame=this.itemBg[e%2?0:1]}),this.checkShowEmptyMsg()}cleanUp(){this.scrollView.content.removeAllChildren(!0)}fillTopColor(t,e,i,o){if(e<3){const s=cc.Color.BLACK.fromHEX(this.listColor[e]);t.node.color=i.node.color=o.node.color=s}}checkShowEmptyMsg(){this.scrollView.node.getChildByName("EmptyMsg").active=!this.scrollView.content.childrenCount}};o([a(s.default)],l.prototype,"scrollView",void 0),o([a([cc.SpriteFrame])],l.prototype,"itemBg",void 0),o([a([cc.SpriteFrame])],l.prototype,"dices",void 0),o([a(cc.Node)],l.prototype,"itemTemplate",void 0),o([a(cc.Node)],l.prototype,"dicesNode",void 0),o([a(cc.Label)],l.prototype,"lblTime",void 0),o([a(cc.Label)],l.prototype,"lblTotal",void 0),l=o([r],l),i.default=l,cc._RF.pop()},{"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces"}],"TX.PopupJackpotHistory":[function(t,e,i){"use strict";cc._RF.push(e,"4c550jq4iBBEJpfBysudTo1","TX.PopupJackpotHistory");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/ChatScrollView"),c=t("../../../scripts/common/Dialog"),r=t("../../../scripts/common/HttpV2"),a=t("../../../scripts/common/InlineLoading"),l=t("../../../scripts/common/Utils"),h=t("./TX.Interfaces"),d=t("./TX.Loader"),p=t("./TX.PopupJackpotHistoryDetail"),{ccclass:u,property:f}=cc._decorator;let m=class extends c.default{constructor(){super(...arguments),this.scrollView=null,this.inlineLoadingPref=null,this.itemBg=new Array,this.sprAtlasDices=null,this.itemTemplate=null,this.lblPercentTai=null,this.lblPercentXiu=null,this.LIMIT=6,this.beforeId=void 0}onLoad(){this.scrollView.node.on("scroll-to-bottom",this.loadData.bind(this),this),this.scrollView.content.parent.getChildByName("ItemTemplateContainer").active=!1,this.lblPercentTai.string="",this.lblPercentXiu.string="";const t=cc.instantiate(this.inlineLoadingPref);t.parent=this.scrollView.node.parent,this.inlineLoading=t.getComponent(a.default)}show(){super.show(),this.container.getChildByName("Main").active=!0,this.container.getChildByName("List").active=!1,this.loadData()}_onDismissed(){this.cleanUp(),super._onDismissed()}loadData(){return s(this,void 0,void 0,function*(){if(!this.fetching)try{this.fetching=!0,this.inlineLoading.show(this.beforeId?1:0),this.scrollView.node.getChildByName("EmptyMsg").active=!1;const e=yield r.default.get(`${h.txApi}jackpot-history`,{limit:this.LIMIT,beforeId:this.beforeId});this.updateStat(e.stat),this.populateUI(e.details)}catch(t){console.error("Failed to load jackpot history:",t)}finally{this.inlineLoading.hide(),this.fetching=!1}})}updateStat(t){this.lblPercentTai.string=`${t.TAI}%`,this.lblPercentXiu.string=`${t.XIU}%`}populateUI(t){t.length&&(this.fetching=!1),t.forEach((e,i)=>{const o=cc.instantiate(this.itemTemplate);o.parent=this.scrollView.content;const{session_id:s,id:n,time:c,result:r,jackpotAmount:a,users:p}=e,[u,f,m]=o.getComponentsInChildren(cc.Label);u.string=`#${s}`,f.string=d.default.instance.fTime(c),m.string=l.default.formatNumber(a);const[g,T,b]=o.getChildByName("dice").getComponentsInChildren(cc.Sprite),y=r===h.ResultType.TAI?6:1,v=this.sprAtlasDices.getSpriteFrame("XUCXAC_"+y);T.spriteFrame=g.spriteFrame=b.spriteFrame=v,o.getChildByName("userBetWinNoHus").getComponentsInChildren(cc.Label).forEach((t,e)=>{p&&p[e]?(t.string=p[e][0],t.node.active=!0):t.node.active=!1}),o.getChildByName("tientrung").getComponentsInChildren(cc.Label).forEach((t,e)=>{p&&p[e]?(t.string=l.default.formatNumberMin(p[e][1]),t.node.active=!0):t.node.active=!1});const C=o.getComponentInChildren(cc.Button).node;C.active=p&&p.length,C._details=e,o.getComponent(cc.Sprite).spriteFrame=this.itemBg[i%2?0:1],i===t.length-1&&(this.beforeId=n),this.checkShowEmptyMsg()})}goToDetail({currentTarget:t}){this.container.getChildByName("Main").active=!1;const e=this.container.getChildByName("List");e.active=!0,this.Detail||(this.Detail=e.getComponent(p.default)),this.Detail.show(t._details)}cleanUp(){this.scrollView.content.removeAllChildren(!0),this.fetching=!1,this.beforeId=void 0,this.Detail&&this.Detail.cleanUp()}checkShowEmptyMsg(){this.scrollView.node.getChildByName("EmptyMsg").active=!this.scrollView.content.childrenCount}};o([f(n.default)],m.prototype,"scrollView",void 0),o([f(cc.Prefab)],m.prototype,"inlineLoadingPref",void 0),o([f([cc.SpriteFrame])],m.prototype,"itemBg",void 0),o([f(cc.SpriteAtlas)],m.prototype,"sprAtlasDices",void 0),o([f(cc.Node)],m.prototype,"itemTemplate",void 0),o([f(cc.Label)],m.prototype,"lblPercentTai",void 0),o([f(cc.Label)],m.prototype,"lblPercentXiu",void 0),m=o([u],m),i.default=m,cc._RF.pop()},{"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/Dialog":void 0,"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/InlineLoading":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.Loader":"TX.Loader","./TX.PopupJackpotHistoryDetail":"TX.PopupJackpotHistoryDetail"}],"TX.PopupRank.CaoThu":[function(t,e,i){"use strict";cc._RF.push(e,"35df9QlnxlIpI00pUCBDH4R","TX.PopupRank.CaoThu");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/ChatScrollView"),c=t("../../../scripts/common/HttpV2"),r=t("../../../scripts/common/InlineLoading"),a=t("../../../scripts/common/Utils"),l=t("./TX.Interfaces"),h=t("lodash"),{ccclass:d,property:p}=cc._decorator;let u=class extends cc.Component{constructor(){super(...arguments),this.scrollView=null,this.Header=null,this.lblTimer=null,this.itemTemplate=null,this.LIMIT=10,this.beforeId=void 0}onLoad(){this.scrollView.node.on("scroll-to-bottom",this.loadData.bind(this),this)}onEnable(){this.loadData()}onDisable(){this.cleanUp()}init(t){const[e,i,o]=t;if(this.inlineLoading)return;this.bgRows=i,this.rankAtlas=o;const s=cc.instantiate(e);s.parent=this.scrollView.node.parent,this.inlineLoading=s.getComponent(r.default)}loadData(){return s(this,void 0,void 0,function*(){if(!this.fetching)try{this.fetching=!0,this.scrollView.node.getChildByName("EmptyMsg").active=!1,this.inlineLoading.show(this.beforeId?1:0);const e=yield c.default.get(`${l.txApi}daily-top`,{dateoffset:0,limit:this.LIMIT,beforeId:this.beforeId});this.populateUI(e)}catch(t){cc.error("Failed to load data:",t)}finally{this.inlineLoading.hide(),this.fetching=!1}})}populateUI(t){const{endTime:e,moneyTXAggList:i,nickNameData:o}=t;this.showTimer(e),this.fillHeader(o||{totalBet:0,totalWin:0,idx:void 0}),i.length&&(this.fetching=!1),i.forEach(({idx:t,userName:e,totalBet:i,rewardTopWin:o,totalWin:s,isWon:n})=>{const c=cc.instantiate(this.itemTemplate);c.parent=this.scrollView.content;const r=c.getComponentsInChildren(cc.Label),[l,h,d,p,u]=r;this.fillTop(l,t),this.colorizeRow(r,t),h.string=e,d.string=a.default.formatNumber(s),p.string=a.default.formatNumber(i),u.string=a.default.formatNumber(o);const[f,m]=c.getChildByName("dattongcuoc").getChildByName("DAUTICH").children;f.opacity=n?255:0,m.opacity=f.opacity?0:255,c.getComponent(cc.Sprite).spriteFrame=this.bgRows[t%2?0:1],this.beforeId=t}),this.checkShowEmptyMsg()}checkShowEmptyMsg(){this.scrollView.node.getChildByName("EmptyMsg").active=!this.scrollView.content.childrenCount}fillTop(t,e){e>3?(t.string=e.toString(),t.node.opacity=255,t.node.parent.children[0].opacity=0):(t.node.opacity=0,t.node.parent.children[0].getComponent(cc.Sprite).spriteFrame=this.rankAtlas.getSpriteFrame(e.toString()),t.node.parent.children[0].opacity=255)}fillHeader({totalBet:t,totalWin:e,idx:i}){const[o,s,n]=this.Header.getComponentsInChildren(cc.Label);o.string=a.default.formatNumber(t),s.string=a.default.formatNumber(e),n.string=i?a.default.formatNumber(i):"V\xf4 c\u1ef1c"}colorizeRow(t,e){const i=[cc.Color.YELLOW,cc.Color.GREEN,cc.Color.RED][e-1]||cc.Color.WHITE;t.forEach(t=>t.node.color=i)}showTimer(t){const e=new Date,i=new Date(t),o=Math.abs(i.getTime()-e.getTime());if(o>0){const e=36e5,i=e/60,s=i/60,n=[Math.floor(o%864e5/e),Math.floor(o%e/i),Math.floor(o%i/s)].map(t=>h.padStart(t.toString(),2,"0"));this.lblTimer.string=n.join(":"),this.unscheduleAllCallbacks(),this.schedule(()=>this.showTimer(t),1,cc.macro.REPEAT_FOREVER,0)}else this.showTimer(t+864e5)}cleanUp(){this.scrollView.content.removeAllChildren(!0),this.beforeId=void 0,this.fetching=!1}};o([p(n.default)],u.prototype,"scrollView",void 0),o([p(cc.Node)],u.prototype,"Header",void 0),o([p(cc.Label)],u.prototype,"lblTimer",void 0),o([p(cc.Node)],u.prototype,"itemTemplate",void 0),u=o([d],u),i.default=u,cc._RF.pop()},{"../../../scripts/common/ChatScrollView":void 0,"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/InlineLoading":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces",lodash:void 0}],"TX.PopupRank.DuaTop":[function(t,e,i){"use strict";cc._RF.push(e,"d13a1xV+N5LUbckXbLbW4BX","TX.PopupRank.DuaTop");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/HttpV2"),c=t("../../../scripts/common/Utils"),r=t("./TX.Interfaces"),a=t("./TX.PopupRank.CaoThu"),{ccclass:l,property:h}=cc._decorator;let d=class extends a.default{constructor(){super(...arguments),this.Top=null,this.dateOffset=0,this.endTime=null}onEnable(){this.loadData()}onDisable(){this.dateOffset=0,this.fillDateFilter(),this.cleanUp()}loadData(){return s(this,void 0,void 0,function*(){if(!this.fetching)try{this.fetching=!0,this.scrollView.node.getChildByName("EmptyMsg").active=!1,this.inlineLoading.show(this.beforeId?1:0),this.setControlsInteractable(!1);const e=yield n.default.get(`${r.txApi}daily-top`,{dateoffset:this.dateOffset,limit:this.LIMIT,beforeId:this.beforeId});this.populateUI(e)}catch(t){cc.error("Failed to load data:",t)}finally{this.inlineLoading.hide(),this.fetching=!1}})}populateUI(t){this.setControlsInteractable(!0);const{endTime:e,moneyTXAggList:i}=t;e&&e!==this.endTime&&(this.endTime=e,this.fillDateFilter()),i.length&&(this.fetching=!1),i.forEach(({idx:t,userName:e,totalWin:i,rewardTopWin:o})=>{const s=cc.instantiate(this.itemTemplate);s.parent=this.scrollView.content;const n=s.getComponentsInChildren(cc.Label),[r,a,l,h]=n;this.fillTop(r,t),this.colorizeRow(n,t),a.string=e,l.string=c.default.formatNumber(i),h.string=c.default.formatNumber(o),s.getComponent(cc.Sprite).spriteFrame=this.bgRows[t%2?0:1],this.beforeId=t}),this.checkShowEmptyMsg()}fillDateFilter(){this.endTime&&(this.Top.getComponentInChildren(cc.Label).string=this.makeTodayDate())}onFilterDateChanged(t){if(t){const e="next"==t.currentTarget.name;if(e&&!this.checkNextBtn())return;this.dateOffset+=e?-1:1}this.fillDateFilter(),this.cleanUp(),this.loadData()}setControlsInteractable(t){this.Top.getComponentsInChildren(cc.Button).forEach(e=>e.interactable=t),t&&this.checkNextBtn()}makeTodayDate(){const t=new Date(this.endTime-864e5*this.dateOffset);return c.default.dateToDDMMYYY(t,"/")}checkNextBtn(){const t=this.Top.getComponentsInChildren(cc.Button)[0],e=0!==this.dateOffset;return t.interactable=e,e}};o([h(cc.Node)],d.prototype,"Top",void 0),d=o([l],d),i.default=d,cc._RF.pop()},{"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/Utils":void 0,"./TX.Interfaces":"TX.Interfaces","./TX.PopupRank.CaoThu":"TX.PopupRank.CaoThu"}],"TX.PopupRank":[function(t,e,i){"use strict";cc._RF.push(e,"030034n5VNCRpJOnoded7I6","TX.PopupRank");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/Dialog"),n=t("../../../scripts/common/UI/CustomToggleContainer"),c=t("./TX.PopupRank.CaoThu"),r=t("./TX.PopupRank.DuaTop"),{ccclass:a,property:l}=cc._decorator;let h=class extends s.default{constructor(){super(...arguments),this.templates=null,this.inlineLoadingPref=null,this.sprAtlasRank=null,this.bgRows=[],this.tabComps=[c.default,r.default],this.tabs=null}onLoad(){this.templates.active=!1,this.initToggleContainer()}initToggleContainer(){const t=[this.inlineLoadingPref,this.bgRows,this.sprAtlasRank];this.tabs.initTabs(this.tabComps,t)}};o([l(cc.Node)],h.prototype,"templates",void 0),o([l(cc.Prefab)],h.prototype,"inlineLoadingPref",void 0),o([l(cc.SpriteAtlas)],h.prototype,"sprAtlasRank",void 0),o([l([cc.SpriteFrame])],h.prototype,"bgRows",void 0),o([l(n.default)],h.prototype,"tabs",void 0),h=o([a],h),i.default=h,cc._RF.pop()},{"../../../scripts/common/Dialog":void 0,"../../../scripts/common/UI/CustomToggleContainer":void 0,"./TX.PopupRank.CaoThu":"TX.PopupRank.CaoThu","./TX.PopupRank.DuaTop":"TX.PopupRank.DuaTop"}],"TX.PopupSoiCau":[function(t,e,i){"use strict";cc._RF.push(e,"14941HLjNVK74aTOEdM5AJi","TX.PopupSoiCau");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c},s=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function c(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(c,r)}a((o=o.apply(t,e||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const n=t("../../../scripts/common/Dialog"),c=t("../../../scripts/common/InlineLoading"),r=t("../../../scripts/common/UI/EventManager"),a=t("../../../scripts/common/HttpV2"),l=t("./TX.Interfaces"),h=t("lodash"),{ccclass:d,property:p}=cc._decorator;let u=class extends n.default{constructor(){super(...arguments),this.whiteLine=null,this.SC1=null,this.SC2=null,this.Phien=null,this.SubHeader=null,this.pv=null,this.inlineLoadingPref=null,this.sprAtlasScore=null,this.histories=[],this.colors=[cc.Color.ORANGE,cc.Color.RED,cc.Color.GREEN],this.markForReload=!1}onLoad(){const t=this.node.getChildByName("templates");[this.soTX,this.whiteLine]=t.children,t.active=!1,[this.SC1Bang1,this.SC1Bang2]=this.SC1.getChildByName("center").children,[this.Sc1Bang1TableLines,this.Sc1Bang1TableSoTx]=this.SC1Bang1.children,[this.SC2Bang1,this.SC2Bang2]=this.SC2.getChildByName("center").children,this.pv.node.on("page-turning",t=>{const e=t.getCurrentPageIndex();this.SubHeader.children.forEach((t,i)=>t.active=i==e)},this),this.SubHeader.children[0].children.forEach((t,e)=>{t.on("toggle",t=>{this.SC1Bang2.children[e].opacity=t.isChecked?255:0})});const e=cc.instantiate(this.inlineLoadingPref);e.parent=this.pv.content.parent,this.inlineLoading=e.getComponent(c.default)}_onShowed(){super._onShowed(),this.load(),this.Phien.opacity=0,r.default.on(l.TXEvent.NEW_SESSION,this.reload,this)}_onDismissed(){super._onDismissed(),this.cleanUp(),r.default.off(l.TXEvent.NEW_SESSION,this.reload,this)}reload(){return s(this,void 0,void 0,function*(){this.node.activeInHierarchy&&(this.markForReload=!0,yield this.load())})}load(){return s(this,void 0,void 0,function*(){try{this.inlineLoading.show(0);const{list:e}=yield a.default.get(`${l.txApi}sessions`);this.histories=e.reverse(),this.loadEverything()}catch(t){cc.error("Error loading sessions:",t)}})}loadEverything(){this.inlineLoading.hide(),this.markForReload&&(this.cleanUp(),this.markForReload=!1),this.populatePhien(),this.drawSc1(),this.drawSc2()}drawSc1(){this.drawSc1Bang1(22),this.drawSc1Bang2(22)}drawSc2(){this.drawSc2Bang1(21,5),this.drawSc2Bang2(21,5)}drawSc1Bang1(t){this.drawSc1Bang1SoTx(t),this.drawSc1Bang1Lines()}drawSc2Bang1(t,e){let i=0,o=0,s=null;h.takeRight(this.histories,t*e).reverse().forEach(({point:n,resultTruyenThong:c},r)=>{const a="TAI"===c,l=cc.instantiate(this.soTX);l.opacity=0,l.getComponent(cc.Sprite).spriteFrame=this.sprAtlasScore.getSpriteFrame(n.toString()),l.parent=this.SC2Bang1.children[0],null==s&&(s=a),s!=a?(s=a,i++,o=0):o+1>=e?(i++,o=0):r>0&&o++,i>=t||(l.setPosition(this.findCoordSc2(i,o,l.parent,t,e,n)),l.opacity=255)})}drawSc2Bang2(t,e){const i=h.takeRight(this.histories,t*e);let o=0;const s={t:0,x:0,all:0};for(let n=0;n<e;n++)for(let c=0;c<t;c++){const r=i[o];if(!r)return;o++;const{point:a,resultTruyenThong:l}=r,h="TAI"===l,d=cc.instantiate(this.soTX);d.opacity=0,d.getComponent(cc.Sprite).spriteFrame=this.sprAtlasScore.getSpriteFrame(a.toString()),d.parent=this.SC2Bang2.children[0],d.setPosition(this.findCoordSc2(n%2?t-c-1:c,n,d.parent,t,e,a)),d.opacity=255,s[h?"t":"x"]++}this.populateTxCounter(s)}populateTxCounter(t){const{t:e,x:i}=t,[o,s]=this.SubHeader.children[1].getComponentsInChildren(cc.Label);o.string=`T\xe0i: ${e}`,s.string=`X\u1ec9u: ${i}`}drawSc1Bang2(t){this.drawSc1Bang2SoTx(t),this.drawSc1Bang2Lines()}drawSc1Bang2SoTx(t){h.takeRight(this.histories,t).forEach(({dices:e},i)=>e.forEach((e,o)=>{this.SC1Bang2.children[o].opacity=this.isSc1Bang2DiceVisible(o)?255:0;const s=this.SC1Bang2.children[o].children[1];this.drawSc1Bang2SoTxDice(e,o,i,t,s)}))}drawSc1Bang2SoTxDice(t,e,i,o,s){const n=cc.instantiate(this.soTX);n.opacity=0,n.getComponent(cc.Sprite).spriteFrame=this.sprAtlasScore.getSpriteFrame(e),n.parent=s,n.setPosition(this.findCoordinateOf(t,[6,1],n.parent,i,o)),n.opacity=255}populatePhien(){const{id:t,dices:e,point:i}=h.last(this.histories),[o,s,n]=this.Phien.getComponentsInChildren(cc.Label);s.string=`#${t}`,n.string=`${i>10?"T\xe0i":"X\u1ec9u"} (${e.join("-")})`,this.Phien.runAction(cc.fadeIn(.3))}drawSc1Bang1SoTx(t){h.takeRight(this.histories,t).forEach(({point:e},i)=>{const o=cc.instantiate(this.soTX);o.opacity=0,o.getComponent(cc.Sprite).spriteFrame=this.sprAtlasScore.getSpriteFrame(e.toString()),o.parent=this.Sc1Bang1TableSoTx,o.setPosition(this.findCoordinateOf(e,[18,3],this.Sc1Bang1TableSoTx,i,t)),o.opacity=255})}drawSc1Bang1Lines(){this.Sc1Bang1TableSoTx.children.forEach((t,e,i)=>{if(e<i.length-1){const o=cc.instantiate(this.whiteLine);o.opacity=0,o.parent=this.Sc1Bang1TableLines,o.setPosition(0,0);const s=o.getComponent(cc.Graphics);s.lineWidth=4,s.moveTo(t.x,t.y),s.lineTo(i[e+1].x,i[e+1].y),s.strokeColor=cc.Color.WHITE,s.stroke(),o.opacity=255}})}drawSc1Bang2Lines(){this.SC1Bang2.children.forEach(this.drawSc1Bang2LinesXX.bind(this))}drawSc1Bang2LinesXX(t,e){const[i,o]=t.children;o.children.forEach((t,o,s)=>{if(o<s.length-1){const n=cc.instantiate(this.whiteLine);n.opacity=0,n.parent=i,n.setPosition(0,0);const c=n.getComponent(cc.Graphics);c.lineWidth=4,c.moveTo(t.x,t.y),c.lineTo(s[o+1].x,s[o+1].y),c.strokeColor=this.colors[e],c.stroke(),n.opacity=255}})}findCoordinateOf(t,e,i,o,s){const[n,c]=e,r=i.width/(s-1)*o,a=i.height/(n-c)*(t-c);return new cc.Vec2(r,a)}findCoordSc2(t,e,i,o,s,n){const c=i.width/(o-1)*t*(0==i.anchorX?1:-1),r=i.height/(s-1)*e*(0==i.anchorY?1:-1);return new cc.Vec2(c,r)}cleanUp(){this.cleanUpSc1(),this.cleanUpSc2()}cleanUpSc1(){this.cleanUpSc1Bang1(),this.cleanUpSc1Bang2()}cleanUpSc2(){this.cleanUpSc2Bang1(),this.cleanUpSc2Bang2()}cleanUpSc1Bang1(){this.SC1Bang1.children.forEach(t=>t.removeAllChildren(!0))}cleanUpSc2Bang1(){this.SC2Bang1.children[0].removeAllChildren(!0)}cleanUpSc2Bang2(){this.SC2Bang2.children[0].removeAllChildren(!0)}cleanUpSc1Bang2(){this.SC1Bang2.children.forEach((t,e)=>this.cleanUpSc1Bang2XX(e))}cleanUpSc1Bang2XX(t){this.SC1Bang2.children[t].children.forEach(t=>t.removeAllChildren(!0))}isSc1Bang2DiceVisible(t){const[e]=this.SubHeader.children;return e.children[t].getComponent(cc.Toggle).isChecked}};o([p(cc.Node)],u.prototype,"SC1",void 0),o([p(cc.Node)],u.prototype,"SC2",void 0),o([p(cc.Node)],u.prototype,"Phien",void 0),o([p(cc.Node)],u.prototype,"SubHeader",void 0),o([p(cc.PageView)],u.prototype,"pv",void 0),o([p(cc.Prefab)],u.prototype,"inlineLoadingPref",void 0),o([p(cc.SpriteAtlas)],u.prototype,"sprAtlasScore",void 0),u=o([d],u),i.default=u,cc._RF.pop()},{"../../../scripts/common/Dialog":void 0,"../../../scripts/common/HttpV2":void 0,"../../../scripts/common/InlineLoading":void 0,"../../../scripts/common/UI/EventManager":void 0,"./TX.Interfaces":"TX.Interfaces",lodash:void 0}],"TX.ResultTimer":[function(t,e,i){"use strict";cc._RF.push(e,"a7cffTbd+JHWYLMJpgva5i+","TX.ResultTimer");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const{ccclass:s}=cc._decorator;let n=class extends cc.Component{constructor(){super(...arguments),this.remainTime=null}onLoad(){this.lbl=this.node.getComponentInChildren(cc.Label),this.stop()}_start(t){0!==t&&(!this.started||this.remainTime<t-1||this.remainTime>t+1)&&(this.node.active=!0,this.node.opacity=255,this.started=!0,this.remainTime=t,this.setLabel(),this.unscheduleAllCallbacks(),this.schedule(this.updateTimer.bind(this),1,this.remainTime,1))}updateTimer(){this.remainTime--,this.remainTime>0?this.setLabel():(this.unscheduleAllCallbacks(),cc.tween(this.node).to(.3,{opacity:0}).call(()=>{this.started=!1,this.node.active=!1}).start())}stop(){this.unscheduleAllCallbacks(),this.node.active=!1}setLabel(){if(!this.lbl)return;const t=this.remainTime<10?`0${this.remainTime}`:`${this.remainTime}`;this.lbl.string=`00:${t}`}};n=o([s],n),i.default=n,cc._RF.pop()},{}],"TX.Toast":[function(t,e,i){"use strict";cc._RF.push(e,"36d10WQN91Lkp6tvhhs1jti","TX.Toast");var o=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,c=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(c=(n<3?s(c):n>3?s(e,i,c):s(e,i))||c);return n>3&&c&&Object.defineProperty(e,i,c),c};Object.defineProperty(i,"__esModule",{value:!0});const s=t("../../../scripts/common/MenuPanel"),{ccclass:n,property:c}=cc._decorator;let r=class extends s.default{onLoad(){this.lbl=this.node.getComponentInChildren(cc.Label),super.onLoad()}showMsg(t,e=3){this.lbl.string=t,this.open(),this.unscheduleAllCallbacks(),this.scheduleOnce(this.close.bind(this),e)}};r=o([n],r),i.default=r,cc._RF.pop()},{"../../../scripts/common/MenuPanel":void 0}]},{},["TX.BetTimer","TX.Bettor","TX.ChatPanel","TX.Cmd","TX.Controller","TX.Dice","TX.DuDay","TX.Histories","TX.Interfaces","TX.Loader","TX.MoneyResult","TX.Nan","TX.PopupGuide","TX.PopupHistory","TX.PopupHistoryDetail","TX.PopupJackpotEffect","TX.PopupJackpotHistory","TX.PopupJackpotHistoryDetail","TX.PopupRank.CaoThu","TX.PopupRank.DuaTop","TX.PopupRank","TX.PopupSoiCau","TX.ResultTimer","TX.Toast"]);